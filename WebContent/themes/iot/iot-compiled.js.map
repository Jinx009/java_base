{"version":3,"sources":["iot.js"],"names":[],"mappings":"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","file":"iot-compiled.js","sourcesContent":["$(function(){\n\t_getData();\n\tvar _pm = getSessionStorage('_pm');\n\tif(_pm!=null&&_pm!=''){\n\t\t$('#pm').html('最近检测结果：'+_pm);\n\t}\n})\nvar $sliderTrack = $('#sliderTrack'), $sliderHandler = $('#sliderHandler'), $sliderValue = $('#sliderValue');\nfunction _getData(){\n\t$.ajax({\n\t\turl:'/interface/product/set/light',\n\t\ttype:'get',\n\t\tdataType:'json',\n\t\tsuccess:function(res){\n\t\t\tif('success'==res){\n\t\t\t\tlayer.open({\n\t\t\t\t    type: 2\n\t\t\t\t    ,content: '等待数据上报...'\n\t\t\t\t });\n\t\t\t\tsetTimeout('_getLight();',30000);\n\t\t\t}else{\n\t\t\t\tvar _data = '设备不在线！';\n\t\t\t    layer.open({\n\t\t\t\t    content: _data\n\t\t\t\t    ,btn: '好'\n\t\t\t\t});\n\t\t\t    $('#lightStatus').html('设备不在线！');\n\t\t\t    $('#lightBtn').html('设备不在线！');\n\t\t\t}\n\t\t}\n\t})\n}\n\nfunction _getLight(){\n\t$.ajax({\n\t\turl:'/interface/product/get',\n\t\ttype:'get',\n\t\tdataType:'json',\n\t\tsuccess:function(res){\n\t\t\tlayer.closeAll();\n\t\t\tvar _data = JSON.parse(res.data);\n\t\t\tvar _arr = _data.rawData.split('');\n\t\t\tvar _v = parseInt(_arr[3]+_arr[4]+_arr[5]+_arr[6]);\n\t\t\tvar _a = parseInt(_arr[10]+_arr[11]+_arr[12]+_arr[13]);\n\t\t\tvar _w = parseInt(_arr[17]+_arr[18]+_arr[19]+_arr[20]);\n\t\t\tvar _l = parseInt(_arr[23]+_arr[24]+_arr[25]);\n\t\t\t$('#lightStatus').html('设备编号：863703032244720，当前电压：'+_v+'V；当前电流：'+_a+'A；当前功率：'+_w+'W'+'；当前亮度：'+_l+'%；');\n\t\t\tif(_v==0){\n\t\t\t\t$sliderTrack.css('width','0%');\n\t\t\t\t$sliderHandler.css('left','0%');\n\t\t\t\t$('#lightBtn').html('当前灯具关闭').attr('onclick',function(){}).addClass('weui-btn_disabled');\n\t\t\t\t_noTouch();\n\t\t\t}else{\n\t\t\t\t$sliderTrack.css('width',_l+'%');\n\t\t\t\t$sliderHandler.css('left',_l+'%');\n\t\t\t\t$('#lightBtn').html('设置亮度'+_l).attr('onclick',function(){\n\t\t\t\t\t_setData();\n\t\t\t\t}).removeClass('weui-btn_disabled');\n\t\t\t\t_hasTouch();\n\t\t\t}\n\t\t}\n\t})\n}\nfunction _setOpenOrClose(){\n\tif($('#check').attr('checked') == 'checked'||$('#check').prop('checked')){\n\t\t_setStatus = '0001';\n\t\t_setData();\n\t}else{\n\t\t_setStatus = '0000';\n\t\t_setData();\n\t}\n}\nvar _setStatus;\nfunction _setData(){\n\t$.ajax({\n\t\turl:'/interface/product/set?status='+_setStatus,\n\t\ttype:'get',\n\t\tdataType:'json',\n\t\tsuccess:function(res){\n\t\t\tif('success'==res){\n//\t\t\t\tlayer.open({\n//\t\t\t\t    type: 2\n//\t\t\t\t    ,content: '等待数据上报...'\n//\t\t\t\t });\n\t\t\t\tsetTimeout('_getData();',1000);\n\t\t\t}else{\n\t\t\t\tvar _data = '设备不在线！';\n\t\t\t    layer.open({\n\t\t\t\t    content: _data\n\t\t\t\t    ,btn: '好'\n\t\t\t\t});\n\t\t\t\t$('#check').prop('checked',false); \n\t\t\t\t$('#check').attr('checked',false); \n\t\t\t}\n\t\t}\n\t})\n}\nfunction _hasTouch(){\n\tvar totalLen = $('#sliderInner').width(), startLeft = 0, startX = 0;\n\t$sliderHandler.on(\n\t\t\t\t\t'touchstart',\n\t\t\t\t\tfunction(e) {\n\t\t\t\t\t\tstartLeft = parseInt($sliderHandler.css('left'))* totalLen / 100;\n\t\t\t\t\t\tstartX = e.changedTouches[0].clientX;\n\t\t\t\t\t}).on(\n\t\t\t\t\t'touchmove',\n\t\t\t\t\tfunction(e) {\n\t\t\t\t\t\tvar dist = startLeft+ e.changedTouches[0].clientX - startX, percent;\n\t\t\t\t\t\tdist = dist < 0 ? 0 : dist > totalLen ? totalLen : dist;\n\t\t\t\t\t\tpercent = parseInt(dist / totalLen * 100);\n\t\t\t\t\t\t$sliderTrack.css('width', percent + '%');\n\t\t\t\t\t\t$sliderHandler.css('left', percent + '%');\n\t\t\t\t\t\t_setStatus = parseInt(percent/10);\n\t\t\t\t\t\t_setStatus = '000'+_setStatus;\n\t\t\t\t\t\tif(_setStatus==10){\n\t\t\t\t\t\t\t_setStatus = '000A';\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$sliderValue.text(percent);\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t});\n}\nfunction _noTouch(){\n\tvar totalLen = $('#sliderInner').width(), startLeft = 0, startX = 0;\n\t$sliderHandler.on(\n\t\t\t\t\t'touchstart',\n\t\t\t\t\tfunction(e) {\n\t\t\t\t\t\tconsole.log('_noTouch');\n\t\t\t\t\t}).on(\n\t\t\t\t\t'touchmove',\n\t\t\t\t\tfunction(e) {});\n}\n\nfunction _setPM2_5(){\n\t$('#pmBtn').hide();\n\t$('#pm_Btn').show();\n\t$.ajax({\n\t\turl:'/interface/product//set/PM2_5',\n\t\ttype:'get',\n\t\tdataType:'json',\n\t\tsuccess:function(res){\n\t\t\tif('success'==res){\n\t\t\t\tsetTimeout('_getPMData();',30000);\n\t\t\t}else{\n\t\t\t\tvar _data = '设备不在线！';\n\t\t\t    layer.open({\n\t\t\t\t    content: _data\n\t\t\t\t    ,btn: '好'\n\t\t\t\t});\n\t\t\t    $('#pmBtn').show();\n\t\t\t\t$('#pm_Btn').hide();\n\t\t\t}\n\t\t}\n\t})\n}\nfunction _getPMData(){\n\t$.ajax({\n\t\turl:'/interface/product/get',\n\t\ttype:'get',\n\t\tdataType:'json',\n\t\tsuccess:function(res){\n\t\t\tlayer.closeAll();\n\t\t\t$('#pmBtn').show();\n\t\t\t$('#pm_Btn').hide();\n\t\t\tvar _data = JSON.parse(res.data).rawData;\n\t\t\t$('#pm').html('最近检测结果：'+_data);\n\t\t\tsetSessionStorage('_pm',_data);\n\t\t}\n\t})\n}\n\nfunction getSessionStorage(_key){\n\tif(window.sessionStorage){     \n\t\treturn window.sessionStorage.getItem(_key);\n\t}\n}\nfunction setSessionStorage(_key,_value){\n\tif(window.sessionStorage){     \n\t\tvar _r = window.sessionStorage.setItem(_key,_value);\n\t\tif(_r!=null&&_r!=''&&_r!=undefined){\n\t\t\treturn _r;\n\t\t}else{\n\t\t\treturn '';\n\t\t}\n\t}else{ \n\t\treturn '';\n\t}\n}"]}