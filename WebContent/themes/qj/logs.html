<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>报警记录</title>
<link
	href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css"
	rel="stylesheet">
<link
	href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
	rel="stylesheet">
</head>
<body>
	<nav class="navbar navbar-default">
		<div class="container-fluid">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed"
					data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"
					aria-expanded="false">
					<span class="sr-only">Toggle navigation</span> <span
						class="icon-bar"></span> <span class="icon-bar"></span> <span
						class="icon-bar"></span>
				</button>
				<a class="navbar-brand" target="_blank"
					href="http://www.zhanway.com"><img height="50px;"
					style="margin-top: -15px;" src="img/logo.png"></a>
			</div>
			<div class="collapse navbar-collapse"
				id="bs-example-navbar-collapse-1">
				<ul class="nav navbar-nav">
					<li><a href="show.html">地理位置</a></li>
					<li><a href="device.html">设备管理</a></li>
					<li class="active"><a href="logs.html">报警管理</a></li>
					<li><a href="data.html">数据曲线</a></li>
				</ul>
				<ul class="nav navbar-nav navbar-right">
					<li><a target="_blank" href="http://www.zhanway.com">走进展为</a></li>
				</ul>
			</div>
		</div>
	</nav>
	<div class="row" style="width: 98%; margin-left: 1%;">
		<div class="col-md-12">
			<div class="panel panel-default">
				<div class="panel-heading">基本信息</div>
				<div class="input-group"
					style="padding-left: 15px; width: 220px; padding-bottom: 15px; margin-top: 10px; float: left;">
					<input type="text" class="form-control" id="mac"
						placeholder="请输入mac号码" value="000919032900001E">
				</div>
				<div class="input-group"
					style="padding-left: 15px; width: 220px; padding-bottom: 15px; margin-top: 10px; float: left;">
					<input type="text" class="form-control" readonly="readonly"
						id="datepicker"> <span class="input-group-btn">
						<button class="btn btn-default" onclick="_getData();"
							type="button">&nbsp;查&nbsp;看&nbsp;</button>
					</span>
				</div>
			</div>
			<div id="logs"></div>
		</div>
	</div>
	<div class="row" style="width: 98%; margin-left: 1%;">
		<div class="col-md-12" id="data">
			<div class="panel panel-default" style="border-color: white;">
				<div class="panel-heading">报警记录</div>
				<div class="panel-body">
					<div style="margin-bottom: 10px; width: 100%;">
						<table class="table table-bordered">
							<tbody v-for="item in datas">
								<tr>
									<th>SN</th>
									<th>电压</th>
									<th>x值</th>
									<th>y值</th>
									<th>z值</th>
									<th>时间</th>
									<th>类型</th>
									<th>x</th>
									<th>y</th>
									<th>z</th>
									<th>acc_x</th>
									<th>acc_y</th>
									<th>acc_z</th>
									<th>a_x_t</th>
									<th>a_x_y</th>
									<th>a_x_z</th>
								</tr>
								<tr>
									<td v-text="item.snValue"></td>
									<td v-text="item.voltage"></td>
									<td v-text="item.baseX"></td>
									<td v-text="item.baseY"></td>
									<td v-text="item.baseZ"></td>
									<td v-text="item.createTime"></td>
									<td v-text="item.type"></td>
									<td v-text="item.xtype"></td>
									<td v-text="item.ytype"></td>
									<td v-text="item.ztype"></td>
									<td v-text="item.baseAcceX"></td>
									<td v-text="item.baseAcceY"></td>
									<td v-text="item.baseAcceZ"></td>
									<td v-text="item.acceXType"></td>
									<td v-text="item.acceYType"></td>
									<td v-text="item.acceZType"></td>
								</tr>
								<tr>
									<th>x-m</th>
									<th>y-m</th>
									<th>z-m</th>
									<th>x-s</th>
									<th>y-s</th>
									<th>z-s</th>
									<th>hard</th>
									<th>soft</th>
									<th>rsrp</th>
									<th>rssi</th>
									<th>pci</th>
									<th>snr</th>
									<th>tem</th>
									<th>sum_s</th>
									<td></td>
									<td></td>
								</tr>
								<tr>
									<td v-text="item.accxMax"></td>
									<td v-text="item.accyMax"></td>
									<td v-text="item.acczMax"></td>
									<td v-text="item.accxMin"></td>
									<td v-text="item.accyMin"></td>
									<td v-text="item.acczMin"></td>
									<td v-text="item.hardV"></td>
									<td v-text="item.softV"></td>
									<td v-text="item.rsrp"></td>
									<td v-text="item.rssi"></td>
									<td v-text="item.pci"></td>
									<td v-text="item.snr"></td>
									<td v-text="item.tem"></td>
									<td v-text="item.sum_s"></td>
									<td></td>
									<td></td>
								</tr>
								<tr height="20px;"></tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- 	<footer class="main-footer"
		style="text-align: center; width: 100%; position: absolute; bottom: 15px;">
		<strong>Copyright &copy; <a href="http://www.zhanway.com"
			target="_blank">上海展为智能技术股份有限公司</a>.
		</strong> All rights reserved.
	</footer> -->
	<div class="control-sidebar-bg"></div>
</body>
<script src="https://cdn.bootcss.com/jquery/1.12.0/jquery.min.js"></script>
<script
	src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://cdn.bootcss.com/vue/2.4.4/vue.min.js"></script>
<script src="/themes/layer/layer.js"></script>
<script src="/themes/laydate/laydate.js"></script>
<script src="js/base.js"></script>
<script type="text/javascript">
	$(function() {
		$('#datepicker').val(new Date().Format('yyyy-MM-dd'));
		laydate.render({
			elem : '#datepicker',
		});
		_getData();
	})
	var _d = '';
	function _getData() {
		var mac = $('#mac').val();
		var date = $('#datepicker').val();
		$
				.ajax({
					url : '/home/cloud/qj/logs',
					dataType : 'json',
					data : 'mac=' + mac + '&date=' + date,
					type : 'post',
					success : function(res) {
						for ( var i in res.data) {
							res.data[i].createTime = jsDateTime(res.data[i].createTime);
							res.data[i].sum_s = '';
							if (res.data[i].rsrp != null
									&& res.data[i].rsrp != '') {
								res.data[i].rsrp = parseInt(res.data[i].rsrp);
							}
							if (res.data[i].pci != null
									&& res.data[i].pci != '') {
								res.data[i].pci = parseInt(res.data[i].pci);
							}
							if (res.data[i].snr != null
									&& res.data[i].snr != '') {
								res.data[i].snr = parseInt(res.data[i].snr);
							}
							if(res.data[i].acczMin!=''&&res.data[i].acczMin!=null){
								res.data[i].sum_s = parseFloat(res.data[i].acczMin)+parseFloat(res.data[i].accyMin)+parseFloat(res.data[i].accxMin);
							}
						}
						if (_d == '') {
							_d = new Vue({
								el : '#data',
								data : {
									datas : res.data
								}
							});
						} else {
							_d.datas = res.data;
						}

					}
				})
	}
	Date.prototype.Format = function(fmt) {
		var o = {
			"M+" : this.getMonth() + 1, // 月份
			"d+" : this.getDate(), // 日
			"h+" : this.getHours(), // 小时
			"m+" : this.getMinutes(), // 分
			"s+" : this.getSeconds(), // 秒
			"q+" : Math.floor((this.getMonth() + 3) / 3), // 季度
			"S" : this.getMilliseconds()
		// 毫秒
		};
		if (/(y+)/.test(fmt))
			fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "")
					.substr(4 - RegExp.$1.length));
		for ( var k in o)
			if (new RegExp("(" + k + ")").test(fmt))
				fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k])
						: (("00" + o[k]).substr(("" + o[k]).length)));
		return fmt;
	};
</script>

</html>