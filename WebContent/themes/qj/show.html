<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>地理位置</title>
    <link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" rel="stylesheet">
	<style type="text/css">
	.location {
		float: left;
		height: 510px;
		position: relative;
		background: url(img/road.jpg) no-repeat 0 0;
		width: 1000px;
		}
	.box{
			position: relative;
			padding-top: 8px;
	}
	.con{
		width: 90px;
		height: 24px;
		line-height:24px;
		border: 2px blue solid;
		border-radius: 3px;
		color: blue;
		font-size:14px;
		text-align: center;
		background: white;
	}
	.con-big{
		width: 134px;
		height: 24px;
		line-height:24px;
		border: 2px blue solid;
		border-radius: 3px;
		color: blue;
		font-size:14px;
		text-align: center;
		background: white;
	}
	.con-ret{
		border: 7px solid transparent;
		border-bottom-color:blue; 
		position: absolute;
		left: 10px;
		top:-6px;
	}
	.device{
		cursor: pointer;
	}
	</style>    
</head>
<body>
<nav class="navbar navbar-default">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand"  target="_blank"  href="http://www.zhanway.com"><img height="50px;" style="margin-top: -15px;" src="img/logo.png"></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                <li class="active"><a href="show.html">地理位置</a></li>
                <li><a href="device.html">设备信息</a></li>
                <li><a href="logs.html">报警日志</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li><a  target="_blank"  href="http://www.zhanway.com">走进展为</a></li>
            </ul>
        </div>
    </div>
</nav>
<div class="row" style="width: 98%;margin-left: 1%;" >
    <div class="col-md-2">
    	<div class="list-group">
		  <a href="#" class="list-group-item active">
		    基本信息
		  </a>
		  <a href="#" class="list-group-item">设备总数：<font style="color: rgb(35,159,171);" >7</font></a>
		  <a href="#" class="list-group-item">报警个数：<font style="color: rgb(35,159,171);" id="leftLot" >0</font></a>
		</div>
    </div>
    <div class="col-md-10">
    	<div class="location" >
			<div class="box" style="width: 30px;height: 30px;position: absolute;top: 120px;left: 300px;">
				<div class="con-ret"></div>
				<div class="con">1807206003</div>
			</div>
			<div id="1807206001" class="box device" data-container="body" data-toggle="popover" data-trigger="hover" data-placement="top" data-content="" 
			style="width: 30px;height: 30px;position: absolute;top: 170px;left: 400px;">
				<div class="con-ret" id="1807206001_1"></div>
				<div class="con" id="1807206001_2">1807206001</div>
			</div>
			<div id="0001171228000003" class="box device" data-container="body" data-toggle="popover" data-trigger="hover" data-placement="top" data-content="" 
			style="width: 30px;height: 30px;position: absolute;top: 180px;left: 590px;">
				<div class="con-ret" id="0001171228000003_1"></div>
				<div class="con-big" id="0001171228000003_2">0001171228000003</div>
			</div>
			<div class="box" style="width: 30px;height: 30px;position: absolute;top: 145px;left: 600px;">
				<div class="con-ret"></div>
				<div class="con">1807206002</div>
			</div>
			<div class="box" style="width: 30px;height: 30px;position: absolute;top: 270px;left: 600px;">
				<div class="con-ret"></div>
				<div class="con">1807206004</div>
			</div>
			<div class="box" style="width: 30px;height: 30px;position: absolute;top: 242px;left: 280px;">
				<div class="con-ret"></div>
				<div class="con">1807206005</div>
			</div>
			<div class="box" style="width: 30px;height: 30px;position: absolute;top: 382px;left: 735px;">
				<div class="con-ret"></div>
				<div class="con">1807206006</div>
			</div>
    	</div>
    </div>
</div>
<footer class="main-footer" style="margin-top:100px;margin-bottom:15px;;text-align: center;width: 100%;">
    <strong>Copyright &copy;  <a href="http://www.zhanway.com" target="_blank">上海展为智能技术股份有限公司</a>.</strong> All rights reserved.
</footer>
<div class="control-sidebar-bg"></div>
<script src="https://cdn.bootcss.com/jquery/1.12.0/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://cdn.bootcss.com/vue/2.4.4/vue.min.js"></script>
<script src="js/base.js?v=1.2"></script>
 <script type="text/javascript">
    $(function(){
    	_getData();
    	setInterval(function() {
    		_getData();
    	}, 5000); 
    })
    function _getData(){
    	$.ajax({
    		url:'/home/cloud/qj/list',
    		type:'get',
    		dataType:'json',
    		success:function(res){
    			var _num = 0;
    			for(var i in res.data){
    				res.data[i].createTime = jsDateTime(res.data[i].createTime);
    				var _sn = res.data[i].snValue;
    				if('报警'==res.data[i].type&&0==res.data[i].doneType){
        				$('#'+_sn+'_1').css('border-bottom-color','red');
        				$('#'+_sn+'_2').css('color','red');
        				$('#'+_sn+'_2').css('border-color','red');
        				_num++;
        				
        			}else{
        				$('#'+_sn+'_1').css('border-bottom-color','blue');
        				$('#'+_sn+'_2').css('color','blue');
        				$('#'+_sn+'_2').css('border-color','blue');
        			}
        			var _htmlStr = "设备编号："+res.data[i].snValue+'<br>';
        			_htmlStr += "电压："+res.data[i].voltage+'V<br>';
        			_htmlStr += "经度："+res.data[i].longitude+'<br>';
        			_htmlStr += "纬度："+res.data[i].latitude+'<br>';
        			_htmlStr += "位置："+res.data[i].address+'<br>';
        			_htmlStr += "更新时间："+res.data[i].createTime+'<br>';
        			$('#'+_sn).attr('data-content',_htmlStr);
        			$("[data-toggle='popover']").popover({html: true});
    			}
    			$('#leftLot').html(_num);
    		}
    	})
    }
    </script>
</body>
</html>