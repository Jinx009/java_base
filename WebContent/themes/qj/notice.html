<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>通知管理</title>
<link
	href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css"
	rel="stylesheet">
<link
	href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
	rel="stylesheet">
</head>
<body>
	<nav class="navbar navbar-default">
		<div class="container-fluid">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed"
					data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"
					aria-expanded="false">
					<span class="sr-only">Toggle navigation</span> <span
						class="icon-bar"></span> <span class="icon-bar"></span> <span
						class="icon-bar"></span>
				</button>
				<a class="navbar-brand" target="_blank"
					href="http://www.zhanway.com"><img height="50px;"
					style="margin-top: -15px;" src="img/logo.png"></a>
			</div>
			<div class="collapse navbar-collapse"
				id="bs-example-navbar-collapse-1">
				<ul class="nav navbar-nav">
					<li><a href="show.html">地理位置</a></li>
					<li><a href="device.html">设备管理</a></li>
					<li><a href="logs.html">报警管理</a></li>
					<li><a href="data.html">数据曲线</a></li>
					<li class="active"><a href="notice.html">通知管理</a></li>
				</ul>
				<ul class="nav navbar-nav navbar-right">
					<li><a target="_blank" href="http://www.zhanway.com">走进展为</a></li>
				</ul>
			</div>
		</div>
	</nav>
	<div class="row" style="width: 98%; margin-left: 1%;">
		<div class="col-md-12">
			<div class="panel panel-default">
				<div class="panel-heading">基本信息</div>
				<div class="input-group"
					style="padding-left: 15px; width: 220px; padding-bottom: 15px; margin-top: 10px; float: left;">
					<input type="text" class="form-control" id="mac"
						placeholder="请输入mac号码">
				</div>
				<div class="input-group"
					style="padding-left: 15px; width: 220px; padding-bottom: 15px; margin-top: 10px; float: left;">
					<input type="text" class="form-control" readonly="readonly"
						id="datepicker"> <span class="input-group-btn">
						<button class="btn btn-default" onclick="_add()" type="button">&nbsp;新&nbsp;增&nbsp;</button>
					</span>
				</div>
			</div>
			<div id="logs"></div>
		</div>
	</div>
	<div class="row" style="width: 98%; margin-left: 1%;">
		<div class="col-md-12" id="data">
			<div class="panel panel-default" style="border-color: white;">
				<div class="panel-heading">通知列表</div>
				<div class="panel-body">
					<div style="margin-bottom: 10px; width: 100%;">
						<table class="table table-bordered">
								<tr>
									<th>编号</th>
									<th>MAC</th>
									<th>添加时间</th>
									<th>操作</th>
								</tr>
								<tbody >
								<tr v-for="item in datas">
									<td v-text="item.id"></td>
									<td v-text="item.mac"></td>
									<td v-text="item.createTime"></td>
									<td><a class="btn btn-danger" v-bind:id="item.id" 
									style="padding: 1px 6px;"
										onclick="_del(this)">删除</a></td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- 	<footer class="main-footer"
		style="text-align: center; width: 100%; position: absolute; bottom: 15px;">
		<strong>Copyright &copy; <a href="http://www.zhanway.com"
			target="_blank">上海展为智能技术股份有限公司</a>.
		</strong> All rights reserved.
	</footer> -->
	<div class="control-sidebar-bg"></div>
</body>
<script src="https://cdn.bootcss.com/jquery/1.12.0/jquery.min.js"></script>
<script
	src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://cdn.bootcss.com/vue/2.4.4/vue.min.js"></script>
<script src="/themes/layer/layer.js"></script>
<script src="/themes/laydate/laydate.js"></script>
<script src="js/base.js"></script>
<script type="text/javascript">
	$(function() {
		_getData();
	})
	function _add(){
		var mac = $('#mac').val();
		$.ajax({
			url:'/home/cloud/qjNotcie/save?mac='+mac,
			dataType:'json',
			type:'get',
			success:function(res){
				layer.alert('操作成功！');
				_getData();
			}
		})
	}
	
	function _del(_e){
		var id = $(_e).attr('id');
		$.ajax({
			url:'/home/cloud/qjNotcie/del?id='+id,
			dataType:'json',
			type:'get',
			success:function(res){
				layer.alert('操作成功！');
				_getData();
			}
		})
	}
	
	var _d = '';
	function _getData() {
			$.ajax({
				url : '/home/cloud/qjNotcie/list',
				dataType : 'json',
				type : 'post',
				success : function(res) {
					for ( var i in res.data) {
						res.data[i].createTime = jsDateTime(res.data[i].createTime);
					}
					if (_d == '') {
						_d = new Vue({
							el : '#data',
							data : {
								datas : res.data
							}
						});
					} else {
						_d.datas = res.data;
					}
				}
			})
	}
	Date.prototype.Format = function(fmt) {
		var o = {
			"M+" : this.getMonth() + 1, // 月份
			"d+" : this.getDate(), // 日
			"h+" : this.getHours(), // 小时
			"m+" : this.getMinutes(), // 分
			"s+" : this.getSeconds(), // 秒
			"q+" : Math.floor((this.getMonth() + 3) / 3), // 季度
			"S" : this.getMilliseconds()
		// 毫秒
		};
		if (/(y+)/.test(fmt))
			fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "")
					.substr(4 - RegExp.$1.length));
		for ( var k in o)
			if (new RegExp("(" + k + ")").test(fmt))
				fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k])
						: (("00" + o[k]).substr(("" + o[k]).length)));
		return fmt;
	};
</script>

</html>