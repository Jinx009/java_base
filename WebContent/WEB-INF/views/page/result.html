    <#include "gnss_header.html">
    <div class="page-content-wrapper">
        <div class="page-content">
            <div class="page-bar">
                <ul class="page-breadcrumb">
                    <li>
                        <i class="fa fa-home"></i>
                        <a href="">监测站点</a>
                        <i class="fa fa-angle-right"></i>
                    </li>
                </ul>
            </div>
            <div class="row" style="margin-top: 15px;">
                <div class="col-md-12 col-sm-12">
                    <div class="portlet light bordered">
                        <div class="portlet-title">
                            <div class="caption">
                                <i class="icon-share font-blue-steel"></i>
                                <span class="caption-subject font-blue-steel ">解算日志</span>
                            </div>
                        </div>
                        <div class="portlet-body">
							<div class="row">
								<form class="form-horizontal" role="form">
									<div class="form-body" >
										<div class="form-group" style="margin-top: 15px;">
											<div class="col-md-3" style="padding-left: 30px;">
												<input type="text" class="form-control" placeholder="输入MAC号码" id="mac" />
											</div>
											<div class="col-md-3" style="padding-left: 0px;">
												<select id="type"  class="form-control" >
													<option value="-1" >全部解算</option>
													<option value="0" >快速</option>
													<option value="1" >静态</option>
												</select>
											</div>
											<div class="col-md-3" style="padding-left: 0px;">
												<select id="status"  class="form-control" >
													<option value="-1" >全部结算结果</option>
													<option value="0" >失败</option>
													<option value="1" >成功</option>
												</select>
											</div>
											<div class="col-md-2">
												<button type="button" class="btn btn-success" onclick="_getData()">查询</button>
											</div>
										</div>
									</div>
								</form>
							 </div>
                            <div class="slimScrollDiv"
                                 style="position: relative; width: auto;"  id="data">
                            <div class="table-scrollable">
                                <table class="table table-striped table-bordered table-hover">
                                    <thead>
                                    <tr>
                                        <th scope="col">站点id</th>
										<th scope="col">经度</th>
										<th scope="col">纬度</th>
										<th scope="col">east</th>
										<th scope="col">north</th>
										<th scope="col">up</th>
									    <th scope="col">类型</th>
										<th scope="col">更新时间</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr v-for="item in datas.list">
										<td v-text="item.rovertag"></td>
										<td v-text="item.lng"></td>
										<td v-text="item.lat"></td>
										<td v-text="item.east"></td>
										<td v-text="item.north"></td>
										<td v-text="item.up"></td>
								        <td>
								        	<font v-if="1===item.type" v-text="'静态'" ></font>
								        	<font v-if="0===item.type" v-text="'快速'" ></font>
								        </td>
										<td v-text="item.datatime"></td>
									</tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="row">
                                <div class="col-md-9 col-sm-12"></div>
                                <div class="col-md-3 col-sm-12">
                                    <div class="dataTables_paginate paging_simple_numbers"
                                         id="sample_editable_1_paginate">
                                        <ul class="pagination">
                                            <li class="paginate_button previous "
                                                aria-controls="sample_editable_1" tabindex="0"
                                                id="sample_editable_1_previous">
                                                <a href="#" onclick="_sub()">
                                                    <i class="fa fa-angle-left"></i>
                                                </a>
                                            </li>
                                            <li class="paginate_button active" aria-controls="sample_editable_1"
                                                tabindex="0">
                                                	 <a href="#" v-text="'当前第'+datas.page.currentPage+'页;共'+datas.page.pages+'页'" ></a>
                                            </li>
                                            <li class="paginate_button next "
                                                aria-controls="sample_editable_1" tabindex="0"
                                                id="sample_editable_1_next">
                                                <a href="#" onclick="_add()">
                                                    <i class="fa fa-angle-right"></i>
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
    <#include "gnss_footer.html">
<script>
$(function(){
	_setClass();
	_getData();
})
var mac = '',status = -1,type = -1;
var p = 1;
var max = 1;
var _d = '';
  function _getData(){
	if(mac!=$('#mac').val()||status!=$('#status').val()||type!=$('#type').val()){
		p = 1;max = 1;
		mac = $('#mac').val();
		status = $('#status').val();
		type = $('#type').val();
	}
  	$.ajax({
  		url:'/d/gnssrtklog/page?p='+p+'&mac='+$('#mac').val()+'&type='+type+'&status='+status,
  		type:'get',
  		dataType:'json',
  		success:function(res){
  			max = res.data.page.pages;
  			for ( var i in res.data.list) {
				res.data.list[i].datatime = toDateTime(parseInt(res.data.list[i].datatime));
				if(res.data.list[i].lng!=''&&res.data.list[i].lng!=null){
					res.data.list[i].lng = parseFloat(res.data.list[i].lng).toFixed(9);
					res.data.list[i].lat = parseFloat(res.data.list[i].lat).toFixed(9);
					if(res.data.list[i].height!=''&&res.data.list[i].height!=null){
						res.data.list[i].height = parseFloat(res.data.list[i].height).toFixed(4);
					}
				}
				if(res.data.list[i].east!=''&&res.data.list[i].east!=null){
					res.data.list[i].east = parseFloat(res.data.list[i].east).toFixed(4);
					res.data.list[i].up = parseFloat(res.data.list[i].up).toFixed(4);
					res.data.list[i].north = parseFloat(res.data.list[i].north).toFixed(4);
				}
			}
  			if(_d==''){
  				_d = new Vue({
  					el : '#data',
  					data : {
  						datas : res.data
  					}
  				})
  			}else{
  				_d.datas = res.data
  			}
  		}
  	})
  }
  function _add(){
		if(max==p){
			layer.alert('当前已是最后一页！');
		}else{
			p++;
			_getData();
		}
	}
	function _sub(){
		if(p==1){
			layer.alert('已经是起始页！');
		}else{
			p--;
			_getData();
		}
	}
</script>
</body>
</html>